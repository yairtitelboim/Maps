<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Center Site Analysis - Professional Table</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@tanstack/react-virtual@3.11.2/dist/umd/index.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #0f172a;
            color: #f1f5f9;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #94a3b8;
            font-size: 1.1rem;
        }

        .table-container {
            background: #1e293b;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
            border: 1px solid #334155;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #f1f5f9;
        }

        .table-subtitle {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: #0f172a;
            border-radius: 8px;
            overflow: hidden;
        }

        .data-table thead {
            background: linear-gradient(135deg, #1e40af, #7c3aed);
        }

        .data-table th {
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #f1f5f9;
            border-bottom: 2px solid #334155;
        }

        .data-table td {
            padding: 16px 12px;
            border-bottom: 1px solid #334155;
            vertical-align: middle;
        }

        .data-table tbody tr:hover {
            background: #1e293b;
            transition: background-color 0.2s ease;
        }

        .node-name {
            font-weight: 600;
            color: #f1f5f9;
            font-size: 0.95rem;
        }

        .node-type {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .type-pwr { background: #dc2626; color: white; }
        .type-txm { background: #ea580c; color: white; }
        .type-dst { background: #7c3aed; color: white; }
        .type-utl { background: #059669; color: white; }

        .power-score {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .score-high { color: #10b981; }
        .score-medium { color: #f59e0b; }
        .score-low { color: #ef4444; }
        .score-na { color: #6b7280; }

        .capacity {
            font-weight: 500;
            color: #f1f5f9;
        }

        .availability {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .status-high { background: #10b981; }
        .status-limited { background: #f59e0b; }
        .status-low { background: #ef4444; }

        .voltage {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .risk-level {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .risk-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .risk-high { background: #ef4444; }
        .risk-medium { background: #f59e0b; }
        .risk-low { background: #10b981; }

        .insights-section {
            margin-top: 30px;
            background: #1e293b;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #334155;
        }

        .insights-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .insight-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #334155;
        }

        .insight-item:last-child {
            border-bottom: none;
        }

        .insight-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .insight-text {
            color: #e2e8f0;
            font-weight: 500;
        }

        .recommendation {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .recommendation-viable {
            background: #064e3b;
            border-color: #10b981;
            color: #d1fae5;
        }

        .recommendation-marginal {
            background: #78350f;
            border-color: #f59e0b;
            color: #fef3c7;
        }

        .recommendation-high-risk {
            background: #7f1d1d;
            border-color: #ef4444;
            color: #fecaca;
        }

        .recommendation-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #94a3b8;
        }

        .error {
            background: #7f1d1d;
            color: #fecaca;
            padding: 16px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const { useVirtualizer } = TanstackReactVirtual;

        // Test data
        const testData = {
            "nodeLevel": `Below is a structured reliability analysis for each specified infrastructure node near Whitney, Texas, using only the required public data sources. Where plant-level data is unavailable, regional Texas data from EIA, ERCOT, or FERC is provided as instructed.

---

## NODE 1: **Bosque Power Co LLC**
- **Type:** Power Plant (Natural Gas, Combined Cycle) [EIA-860]
- **EIA Plant ID:** 78242 [EIA Power Plant Data]
- **Current Status:** Operational [EIA-860]

**1. POWER SCORE:** 9/10  
- **Nameplate Capacity:** 800 MW [EIA-860, 2023]  
- **Recent Generation:** 5,200,000 MWh (2023) [EIA State Electricity Data]  
- **Capacity Factor:** 74.2% (2023, Texas NGCC average) [EIA Electric Power Monthly]  
- **Source Link:** https://www.eia.gov/electricity/data/eia860/  
- **Last Updated:** October 2023

**2. STABILITY SCORE:** 8/10  
- **ERCOT Zone:** North [ERCOT Public Reports]  
- **Grid Integration:** Directly connected to ERCOT transmission grid [FERC Market Oversight]  
- **Reliability Metrics:** Texas NGCC plants report forced outage rates <3% [EIA State Reliability Data]  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024

**3. TRANSMISSION CAPACITY:**  
- **Transmission Lines:** 345 kV lines connect to ERCOT backbone [EIA Transmission Data]  
- **Voltage Level:** 345 kV [FERC Transmission Studies]  
- **Available Capacity:** North zone surplus >5,000 MW (2024) [ERCOT Resource Adequacy]  
- **Regional Load:** North zone peak ~24,000 MW (2023) [EIA State Data]  
- **Source Link:** https://www.ferc.gov/market-oversight/markets-electricity  
- **Last Updated:** July 2024

**4. RELIABILITY METRICS:**  
- **Historical Outages:** No major outages reported 2022‚Äì2024 [EIA Plant Operations]  
- **Fuel Dependencies:** Natural gas, dual-fuel capability [EIA Fuel Data]  
- **Weather Resilience:** Upgrades post-2021 winter event [FERC Reliability Studies]  
- **Maintenance History:** Scheduled annual maintenance, no extended forced outages [EIA Plant Data]  
- **Source Links:** https://www.eia.gov/electricity/data/eia860/, https://www.ferc.gov/market-oversight/markets-electricity  
- **Last Updated:** October 2023

**5. REGIONAL CONTEXT:**  
- **Load Zone Analysis:** North zone, high reserve margin [ERCOT Load Zone Data]  
- **Transmission Planning:** Ongoing upgrades for North Texas [FERC Regional Studies]  
- **Infrastructure Investment:** Recent filings for capacity expansion [Texas PUC Filings]  
- **Regional Generation Mix:** 48% natural gas, 23% wind, 18% coal, 11% other (2023) [EIA State Data]  
- **Source Links:** https://www.ercot.com/news/reports, https://www.puc.texas.gov/  
- **Last Updated:** August 2024

**6. DATA CENTER IMPACT:**  
- **Power Availability:** High, with significant surplus in North zone [EIA Generation Data]  
- **Transmission Redundancy:** Multiple 345 kV paths [FERC Transmission Studies]  
- **Reliability Standards:** Meets ERCOT and PUC standards [Texas PUC Compliance]  
- **Grid Stability:** Strong, with low forced outage rates [ERCOT System Reports]  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024

---

## NODE 2: **Hill County Water Supply Corporation**
- **Type:** Electric Utility (Distribution) [EIA-860]
- **EIA Plant ID:** Data not available from public EIA/FERC/ERCOT sources
- **Current Status:** Operational [Texas PUC Supply Chain Map]

**1. POWER SCORE:** Data not available from public EIA/FERC/ERCOT sources  
- **Nameplate Capacity:** N/A  
- **Recent Generation:** N/A  
- **Capacity Factor:** N/A  
- **Source Link:** https://www.puc.texas.gov/industry/maps/supplychain/Default.aspx  
- **Last Updated:** April 2024

**2. STABILITY SCORE:** Data not available from public EIA/FERC/ERCOT sources  
- **ERCOT Zone:** North [ERCOT Public Reports]  
- **Grid Integration:** Distribution-level, receives power from ERCOT grid [FERC Market Oversight]  
- **Reliability Metrics:** N/A  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024

**3. TRANSMISSION CAPACITY:**  
- **Transmission Lines:** Receives from regional substations [EIA Transmission Data]  
- **Voltage Level:** Distribution (typically 12‚Äì25 kV) [FERC Transmission Studies]  
- **Available Capacity:** N/A  
- **Regional Load:** Hill County peak ~150 MW (2023, regional estimate) [EIA State Data]  
- **Source Link:** https://www.eia.gov/electricity/data/state/  
- **Last Updated:** October 2023

**4. RELIABILITY METRICS:**  
- **Historical Outages:** Not reported at utility level [EIA Plant Operations]  
- **Fuel Dependencies:** N/A  
- **Weather Resilience:** Subject to ERCOT and PUC weatherization rules [FERC Reliability Studies]  
- **Maintenance History:** N/A  
- **Source Links:** https://www.puc.texas.gov/industry/maps/supplychain/Default.aspx  
- **Last Updated:** April 2024

**5. REGIONAL CONTEXT:**  
- **Load Zone Analysis:** North zone [ERCOT Load Zone Data]  
- **Transmission Planning:** Covered by ERCOT North zone planning [FERC Regional Studies]  
- **Infrastructure Investment:** PUC filings for distribution upgrades [Texas PUC Filings]  
- **Regional Generation Mix:** See Node 1  
- **Source Links:** https://www.ercot.com/news/reports, https://www.puc.texas.gov/  
- **Last Updated:** August 2024

**6. DATA CENTER IMPACT:**  
- **Power Availability:** Dependent on upstream transmission and substation reliability [EIA Generation Data]  
- **Transmission Redundancy:** Limited at distribution level [FERC Transmission Studies]  
- **Reliability Standards:** Subject to PUC and ERCOT rules [Texas PUC Compliance]  
- **Grid Stability:** Follows regional trends [ERCOT System Reports]  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024

---

## NODE 3: **Oncor Electric Delivery**
- **Type:** Electric Utility (Transmission & Distribution) [EIA-860]
- **EIA Plant ID:** Data not available from public EIA/FERC/ERCOT sources
- **Current Status:** Operational [Texas PUC Supply Chain Map]

**1. POWER SCORE:** Data not available from public EIA/FERC/ERCOT sources  
- **Nameplate Capacity:** N/A  
- **Recent Generation:** N/A  
- **Capacity Factor:** N/A  
- **Source Link:** https://www.puc.texas.gov/industry/maps/supplychain/Default.aspx  
- **Last Updated:** April 2024

**2. STABILITY SCORE:** 9/10  
- **ERCOT Zone:** North [ERCOT Public Reports]  
- **Grid Integration:** Major ERCOT transmission operator [FERC Market Oversight]  
- **Reliability Metrics:** Meets NERC/PUC reliability standards [EIA Reliability Data]  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024

**3. TRANSMISSION CAPACITY:**  
- **Transmission Lines:** 138 kV, 345 kV lines in region [EIA Transmission Data]  
- **Voltage Level:** 138/345 kV [FERC Transmission Studies]  
- **Available Capacity:** North zone surplus >5,000 MW [ERCOT Resource Adequacy]  
- **Regional Load:** See Node 1  
- **Source Link:** https://www.ferc.gov/market-oversight/markets-electricity  
- **Last Updated:** July 2024

**4. RELIABILITY METRICS:**  
- **Historical Outages:** No major transmission outages reported 2022‚Äì2024 [ERCOT Outage Data]  
- **Fuel Dependencies:** N/A  
- **Weather Resilience:** Hardened post-2021 [FERC Reliability Studies]  
- **Maintenance History:** Routine, per ERCOT filings [EIA Plant Data]  
- **Source Links:** https://www.ercot.com/news/reports, https://www.ferc.gov/market-oversight/markets-electricity  
- **Last Updated:** August 2024

**5. REGIONAL CONTEXT:**  
- **Load Zone Analysis:** North zone [ERCOT Load Zone Data]  
- **Transmission Planning:** Ongoing upgrades [FERC Regional Studies]  
- **Infrastructure Investment:** Major PUC filings for grid modernization [Texas PUC Filings]  
- **Regional Generation Mix:** See Node 1  
- **Source Links:** https://www.ercot.com/news/reports, https://www.puc.texas.gov/  
- **Last Updated:** August 2024

**6. DATA CENTER IMPACT:**  
- **Power Availability:** High, with robust transmission [EIA Generation Data]  
- **Transmission Redundancy:** Multiple high-voltage paths [FERC Transmission Studies]  
- **Reliability Standards:** Meets/exceeds ERCOT/PUC standards [Texas PUC Compliance]  
- **Grid Stability:** Strong [ERCOT System Reports]  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024

---

## NODE 4: **Lake Whitney Power Plant**
- **Type:** Power Plant (Hydroelectric) [EIA-860]
- **EIA Plant ID:** 6414 [EIA Power Plant Data][4]
- **Current Status:** Operational [EIA-860][4]

**1. POWER SCORE:** 6/10  
- **Nameplate Capacity:** 48 MW [EIA-860][4]  
- **Recent Generation:** ~120,000 MWh (2023, hydro estimate) [EIA State Electricity Data]  
- **Capacity Factor:** 28.5% (2023, Texas hydro average) [EIA Electric Power Monthly]  
- **Source Link:** https://www.eia.gov/electricity/data/eia860/  
- **Last Updated:** October 2023

**2. STABILITY SCORE:** 7/10  
- **ERCOT Zone:** North [ERCOT Public Reports]  
- **Grid Integration:** Direct tie to ERCOT grid [FERC Market Oversight]  
- **Reliability Metrics:** Hydro plants have low forced outage rates (<2%) [EIA Reliability Data]  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024

**3. TRANSMISSION CAPACITY:**  
- **Transmission Lines:** 69 kV/138 kV lines to regional substations [EIA Transmission Data]  
- **Voltage Level:** 69/138 kV [FERC Transmission Studies]  
- **Available Capacity:** Small relative to regional load [ERCOT Resource Adequacy]  
- **Regional Load:** See Node 1  
- **Source Link:** https://www.ferc.gov/market-oversight/markets-electricity  
- **Last Updated:** July 2024

**4. RELIABILITY METRICS:**  
- **Historical Outages:** No major outages reported 2022‚Äì2024 [EIA Plant Operations][4]  
- **Fuel Dependencies:** Water inflow (hydro) [EIA Fuel Data][4]  
- **Weather Resilience:** Subject to drought risk [FERC Reliability Studies]  
- **Maintenance History:** Routine, per USACE schedule [EIA Plant Data][4]  
- **Source Links:** https://www.eia.gov/electricity/data/eia860/, https://www.ferc.gov/market-oversight/markets-electricity  
- **Last Updated:** October 2023

**5. REGIONAL CONTEXT:**  
- **Load Zone Analysis:** North zone [ERCOT Load Zone Data]  
- **Transmission Planning:** Minor role in regional planning [FERC Regional Studies]  
- **Infrastructure Investment:** Limited, focused on maintenance [Texas PUC Filings]  
- **Regional Generation Mix:** See Node 1  
- **Source Links:** https://www.ercot.com/news/reports, https://www.puc.texas.gov/  
- **Last Updated:** August 2024

**6. DATA CENTER IMPACT:**  
- **Power Availability:** Limited, not primary supply [EIA Generation Data][4]  
- **Transmission Redundancy:** Supported by larger grid [FERC Transmission Studies]  
- **Reliability Standards:** Meets ERCOT/PUC standards [Texas PUC Compliance]  
- **Grid Stability:** Stable, but not a major contributor [ERCOT System Reports]  
- **Source Link:** https://www.ercot.com/news/reports  
- **Last Updated:** August 2024`
        };

        // Helper functions
        function extractNodeType(node) {
            const typeMatch = node.match(/\*\*Type:\*\*\s*(.+?)\s*\[/);
            return typeMatch ? typeMatch[1].trim() : 'Unknown';
        }

        function extractCriticalData(node) {
            const data = {};
            
            // Extract power score
            const powerMatch = node.match(/\*\*1\. POWER SCORE:\*\*\s*(\d+\/\d+)/);
            if (powerMatch) data.powerScore = powerMatch[1];
            
            // Extract stability score
            const stabilityMatch = node.match(/\*\*2\. STABILITY SCORE:\*\*\s*(\d+\/\d+)/);
            if (stabilityMatch) data.stabilityScore = stabilityMatch[1];
            
            // Extract capacity
            const capacityMatch = node.match(/\*\*Nameplate Capacity:\*\*\s*([^\n]+)/);
            if (capacityMatch) data.capacity = capacityMatch[1].trim();
            
            // Extract voltage level
            const voltageMatch = node.match(/\*\*Voltage Level:\*\*\s*([^\n]+)/);
            if (voltageMatch) data.voltageLevel = voltageMatch[1].trim();
            
            // Extract power availability
            const availabilityMatch = node.match(/\*\*Power Availability:\*\*\s*([^\n]+)/);
            if (availabilityMatch) data.availability = availabilityMatch[1].trim();
            
            // Extract key risk factors
            const riskMatch = node.match(/\*\*Weather Resilience:\*\*\s*([^\n]+)/);
            if (riskMatch) data.riskFactors = riskMatch[1].trim();
            
            return data;
        }

        function getTypeAbbreviation(type) {
            if (type.includes('Power Plant')) return 'PWR';
            if (type.includes('Transmission')) return 'TXM';
            if (type.includes('Distribution')) return 'DST';
            if (type.includes('Utility')) return 'UTL';
            return 'OTH';
        }

        function extractCapacityValue(capacity) {
            if (!capacity || capacity.includes('N/A')) return 'N/A';
            const match = capacity.match(/(\d+(?:,\d+)*)\s*MW/);
            return match ? `${match[1]} MW` : capacity.split('[')[0].trim();
        }

        function extractAvailabilityLevel(availability) {
            if (!availability) return { level: 'Unknown', class: 'status-low' };
            if (availability.toLowerCase().includes('high')) return { level: 'High', class: 'status-high' };
            if (availability.toLowerCase().includes('limited') || availability.toLowerCase().includes('dependent')) return { level: 'Limited', class: 'status-limited' };
            return { level: 'Low', class: 'status-low' };
        }

        function extractVoltageValue(voltage) {
            if (!voltage) return 'N/A';
            const match = voltage.match(/(\d+(?:\/\d+)?)\s*kV/);
            return match ? `${match[1]} kV` : voltage.split('[')[0].trim();
        }

        function extractRiskLevel(riskFactors) {
            if (!riskFactors) return { level: 'Low', class: 'risk-low' };
            const risk = riskFactors.toLowerCase();
            if (risk.includes('drought') || risk.includes('outage') || risk.includes('weatherization')) return { level: 'High', class: 'risk-high' };
            if (risk.includes('upgrades') || risk.includes('hardened')) return { level: 'Medium', class: 'risk-medium' };
            return { level: 'Low', class: 'risk-low' };
        }

        function getScoreClass(score) {
            if (score === 'N/A') return 'score-na';
            const num = parseInt(score.split('/')[0]);
            if (num >= 8) return 'score-high';
            if (num >= 6) return 'score-medium';
            return 'score-low';
        }

        function DataCenterTable() {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            useEffect(() => {
                try {
                    // Parse the test data
                    const sections = testData.nodeLevel.split('## NODE');
                    const nodes = sections.slice(1);
                    
                    const processedData = nodes.map((node, index) => {
                        const nodeNameMatch = node.split('\n')[0].match(/^## NODE \d+:\s*\*\*(.+?)\*\*$/);
                        const nodeName = nodeNameMatch ? nodeNameMatch[1].trim() : node.split('\n')[0].replace(/^## NODE \d+:\s*\*\*/, '').replace(/\*\*$/, '').trim();
                        const nodeType = extractNodeType(node);
                        const criticalData = extractCriticalData(node);
                        
                        const powerScore = criticalData.powerScore || 'N/A';
                        const capacity = extractCapacityValue(criticalData.capacity);
                        const availability = extractAvailabilityLevel(criticalData.availability);
                        const voltage = extractVoltageValue(criticalData.voltageLevel);
                        const risk = extractRiskLevel(criticalData.riskFactors);
                        
                        return {
                            id: index + 1,
                            name: nodeName,
                            type: getTypeAbbreviation(nodeType),
                            typeFull: nodeType,
                            powerScore,
                            capacity,
                            availability: availability.level,
                            availabilityClass: availability.class,
                            voltage,
                            risk: risk.level,
                            riskClass: risk.class,
                            scoreClass: getScoreClass(powerScore)
                        };
                    });
                    
                    setData(processedData);
                    setLoading(false);
                } catch (err) {
                    setError(err.message);
                    setLoading(false);
                }
            }, []);

            const insights = useMemo(() => {
                if (data.length === 0) return null;
                
                const bestPowerNode = data.reduce((best, node) => {
                    const currentScore = parseInt(node.powerScore.split('/')[0]) || 0;
                    const bestScore = parseInt(best.powerScore.split('/')[0]) || 0;
                    return currentScore > bestScore ? node : best;
                }, data[0]);
                
                const transmissionNodes = data.filter(node => 
                    node.type === 'TXM' || 
                    node.voltage.includes('345') || 
                    node.voltage.includes('138')
                );
                
                const totalCapacity = data.reduce((total, node) => {
                    const capacity = parseFloat(node.capacity.replace(/[^\d.]/g, '')) || 0;
                    return total + capacity;
                }, 0);
                
                const highRiskNodes = data.filter(node => node.risk === 'High');
                const mediumRiskNodes = data.filter(node => node.risk === 'Medium');
                
                const viableNodes = data.filter(node => {
                    const powerScore = parseInt(node.powerScore.split('/')[0]) || 0;
                    return powerScore >= 7 || node.availability === 'High' || node.voltage.includes('345');
                });
                
                let recommendation = 'HIGH RISK SITE';
                let recommendationClass = 'recommendation-high-risk';
                if (viableNodes.length >= 2) {
                    recommendation = 'VIABLE SITE';
                    recommendationClass = 'recommendation-viable';
                } else if (viableNodes.length === 1) {
                    recommendation = 'MARGINAL SITE';
                    recommendationClass = 'recommendation-marginal';
                }
                
                return {
                    bestPowerNode,
                    transmissionNodes,
                    totalCapacity,
                    highRiskNodes,
                    mediumRiskNodes,
                    viableNodes,
                    recommendation,
                    recommendationClass
                };
            }, [data]);

            if (loading) {
                return <div className="loading">Loading infrastructure data...</div>;
            }

            if (error) {
                return <div className="error">Error loading data: {error}</div>;
            }

            return (
                <div className="container">
                    <div className="header">
                        <h1>üè¢ Data Center Site Analysis</h1>
                        <p>Critical infrastructure assessment for site feasibility</p>
                    </div>

                    <div className="controls">
                        <button className="btn btn-primary" onClick={() => window.location.reload()}>
                            üîÑ Refresh Data
                        </button>
                        <button className="btn btn-secondary" onClick={() => console.log('Export functionality would go here')}>
                            üìä Export Report
                        </button>
                    </div>

                    <div className="table-container">
                        <div className="table-header">
                            <div>
                                <div className="table-title">Infrastructure Nodes</div>
                                <div className="table-subtitle">{data.length} nodes analyzed</div>
                            </div>
                        </div>

                        <table className="data-table">
                            <thead>
                                <tr>
                                    <th>Node</th>
                                    <th>Type</th>
                                    <th>Power Score</th>
                                    <th>Capacity</th>
                                    <th>Availability</th>
                                    <th>Voltage</th>
                                    <th>Risk Level</th>
                                </tr>
                            </thead>
                            <tbody>
                                {data.map((node) => (
                                    <tr key={node.id}>
                                        <td>
                                            <div className="node-name">{node.name}</div>
                                        </td>
                                        <td>
                                            <span className={`node-type type-${node.type.toLowerCase()}`}>
                                                {node.type}
                                            </span>
                                        </td>
                                        <td>
                                            <span className={`power-score ${node.scoreClass}`}>
                                                {node.powerScore}
                                            </span>
                                        </td>
                                        <td>
                                            <div className="capacity">{node.capacity}</div>
                                        </td>
                                        <td>
                                            <div className="availability">
                                                <div className={`status-indicator ${node.availabilityClass}`}></div>
                                                {node.availability}
                                            </div>
                                        </td>
                                        <td>
                                            <div className="voltage">{node.voltage}</div>
                                        </td>
                                        <td>
                                            <div className="risk-level">
                                                <div className={`risk-indicator ${node.riskClass}`}></div>
                                                {node.risk}
                                            </div>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>

                    {insights && (
                        <div className="insights-section">
                            <div className="insights-title">
                                üéØ Key Insights for Data Center Development
                            </div>
                            
                            <div className="insight-item">
                                <span className="insight-icon">üîã</span>
                                <span className="insight-text">
                                    <strong>Primary Power Source:</strong> {insights.bestPowerNode.name} ({insights.bestPowerNode.powerScore} power score)
                                </span>
                            </div>
                            
                            <div className="insight-item">
                                <span className="insight-icon">‚ö°</span>
                                <span className="insight-text">
                                    <strong>Transmission Access:</strong> {insights.transmissionNodes.length} high-voltage connection(s) available
                                </span>
                            </div>
                            
                            <div className="insight-item">
                                <span className="insight-icon">üìä</span>
                                <span className="insight-text">
                                    <strong>Total Available Capacity:</strong> ~{insights.totalCapacity.toFixed(0)} MW
                                </span>
                            </div>
                            
                            <div className="insight-item">
                                <span className="insight-icon">‚ö†Ô∏è</span>
                                <span className="insight-text">
                                    <strong>Risk Status:</strong> {
                                        insights.highRiskNodes.length > 0 
                                            ? `${insights.highRiskNodes.length} high-risk component(s)`
                                            : insights.mediumRiskNodes.length > 0
                                            ? `${insights.mediumRiskNodes.length} medium-risk component(s) - manageable`
                                            : 'Low risk infrastructure profile'
                                    }
                                </span>
                            </div>

                            <div className={`recommendation ${insights.recommendationClass}`}>
                                <div className="recommendation-title">
                                    üìã Site Recommendation: {insights.recommendation}
                                </div>
                                <div>
                                    {insights.recommendation === 'VIABLE SITE' 
                                        ? 'Multiple reliable power sources and transmission access'
                                        : insights.recommendation === 'MARGINAL SITE'
                                        ? 'Limited redundancy, consider backup options'
                                        : 'Insufficient reliable infrastructure'
                                    }
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<DataCenterTable />, document.getElementById('root'));
    </script>
</body>
</html>
